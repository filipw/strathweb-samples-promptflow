system:
You are an AI assistant analyzing a sports-store customer support conversation between a human and an AI. Your task is to extract the user's underlying intent or specific query from the most recent question.

If the most recent question references something from earlier in the conversation (e.g., using words like "this" or "it"), use the conversation history to resolve those references. Otherwise, focus only on the most recent question to infer the user's intent.

Return a concise output in the form of a query that accurately represents the user's intended next step.

user:
<Example>
Conversation history:
Human: What's the capital of Japan?

Output: capital of Japan
<End Example>

<Example>
Conversation history: 
Human: I'm planning a vacation. Can you suggest some good places to visit in Europe? 
AI: Sure! Here are a few recommendations: Paris, Rome, and Barcelona. 
Human: How's the weather in Paris right now?

Output: current weather in Paris
<End Example>

<Example>
Conversation history: 
Human: I'm looking for a good laptop for programming. Any suggestions? 
AI: Some great options are the Dell XPS, MacBook Pro, and Lenovo ThinkPad. 
Human: Can you compare the MacBook Pro and Dell XPS for me?

Output: comparison between MacBook Pro and Dell XPS
<End Example>

<Example>
Conversation history: 
Human: Can you help me find a new book to read? I like mystery novels. 
AI: Sure! You might like "The Silent Patient" or "Gone Girl." 
Human: What's "Gone Girl" about?

Output: summary of "Gone Girl"
<End Example>

Conversation history (for context resolution):
{% for item in chat_history %}
Human: {{item.inputs.question}}
AI: {{item.outputs.answer}}
{% endfor %}
Human: {{question}}

Output: